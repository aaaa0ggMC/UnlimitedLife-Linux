aux_source_directory("./src" AGE-SRC)
add_library(AGE SHARED ${AGE-SRC})
set_target_properties(AGE PROPERTIES LINKER_LANGUAGE CXX)
if(WIN32)
target_link_libraries(AGE PRIVATE glew32 glfw3 opengl32 gdi32 user32 kernel32)
target_compile_definitions(AGE PRIVATE GLEW_STATIC)
else()
target_link_libraries(AGE PRIVATE OpenGL GLEW glfw)
endif()
target_link_options(AGE PUBLIC "-Wl,--allow-multiple-definition")
target_compile_definitions(AGE PUBLIC AGE_BUILD_DLL)

aux_source_directory("./age_test/agetest-src/" AGETEST_SRC)
add_executable(agetest ${AGETEST_SRC})
if(WIN32)
target_link_libraries(agetest PRIVATE glfw3 AGE aaaa0ggmcLib)
else()
target_link_libraries(agetest PRIVATE AGE aaaa0ggmcLib glfw)
endif()
if(WIN32)
target_link_options(agetest PUBLIC "-Wl,--rpath,./")
else()
target_link_options(agetest PUBLIC "-Wl,--rpath,./ -static -static-libgcc -static-libstdc++")
endif()

