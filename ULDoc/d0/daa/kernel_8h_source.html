<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ULDoc: CDep/headers/alib-g3/log/kernel.h 源文件</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ULDoc<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">UnlimitedLife以及子项目自动生成的文档（只有中文）</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d0/daa/kernel_8h_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">kernel.h</div></div>
</div><!--header-->
<div class="contents">
<a href="../../d0/daa/kernel_8h.html">浏览该文件的文档.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#ifndef ALOGGER2_H_INCLUDED</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#define ALOGGER2_H_INCLUDED</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;<a class="code" href="../../d5/d6c/alib-g3_2autil_8h.html">alib-g3/autil.h</a>&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;<a class="code" href="../../d0/de9/aref_8h.html">alib-g3/aref.h</a>&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;<a class="code" href="../../d6/dd9/aclock_8h.html">alib-g3/aclock.h</a>&gt;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &lt;alib-g3/log/streamed_context.h&gt;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;alib-g3/log/base_config.h&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;alib-g3/log/base_msg.h&gt;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;alib-g3/log/base_mod.h&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &lt;deque&gt;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &lt;mutex&gt;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &lt;semaphore&gt;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &lt;memory_resource&gt;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &lt;span&gt;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &lt;type_traits&gt;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#ifdef __linux__</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#define __internal_alib_localtime localtime_r</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="../../d0/daa/kernel_8h.html#ad85a1673de24e63499ec05c1dbd63487">   48</a></span><span class="preprocessor">#define __internal_alib_localtime localtime_s</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#ifndef ALIB_DEF_CLOCK_SOURCE</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#ifndef CLOCK_MONOTONIC_COARSE</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#ifndef CLOCK_REALTIME_COARSE</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#define ALIB_DEF_CLOCK_SOURCE CLOCK_REALTIME</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#define ALIB_DEF_CLOCK_SOURCE CLOCK_REALTIME_COARSE</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#else </span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#define ALIB_DEF_CLOCK_SOURCE CLOCK_MONOTONIC_COARSE</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#endif </span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="keyword">namespace </span><a class="code hl_namespace" href="../../d1/d27/namespacealib_1_1g3.html">alib::g3</a>{</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="../../d1/d27/namespacealib_1_1g3.html#a4b7acd0425b0ff99f06ea2309b0214b4">   65</a></span>    <span class="keyword">constexpr</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#a4b7acd0425b0ff99f06ea2309b0214b4">semaphore_max_val</a> = std::__semaphore_impl::_S_max;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="../../d1/d27/namespacealib_1_1g3.html#aa8d3491bbafbd1d8e75ca20d86404283">   67</a></span>    <span class="keyword">constexpr</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#aa8d3491bbafbd1d8e75ca20d86404283">consumer_message_default_count</a> = 128;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="../../d1/d27/namespacealib_1_1g3.html#aed2c3a17127a4eb7934ab6413403a224">   69</a></span>    <span class="keyword">constexpr</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#aed2c3a17127a4eb7934ab6413403a224">date_str_resize</a> = 32;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="../../d1/d27/namespacealib_1_1g3.html#afe9d30864be1be49f051a75205d9885e">   71</a></span>    <span class="keyword">constexpr</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#afe9d30864be1be49f051a75205d9885e">compose_str_resize</a> = 1024;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="../../d1/d27/namespacealib_1_1g3.html#a28d42b4f8e8e1d67c20c7f517d68e6a7">   73</a></span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#a28d42b4f8e8e1d67c20c7f517d68e6a7">time_clock_source</a> = ALIB_DEF_CLOCK_SOURCE;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="../../d1/d27/namespacealib_1_1g3.html#acfef9ad84f0d182e75aebda76a7fdc13">   75</a></span>    <span class="keyword">constexpr</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#acfef9ad84f0d182e75aebda76a7fdc13">config_pool_reserve_size</a> = 64;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="foldopen" id="foldopen00078" data-start="{" data-end="};">
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033">   78</a></span>    <span class="keyword">enum class</span> <a class="code hl_enumeration" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033">LogLevel</a> : <span class="keywordtype">int</span>{</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        <a class="code hl_enumvalue" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033add4ec0ac4e58f7c32a01244ae91150b1">Trace</a> = 0, </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        <a class="code hl_enumvalue" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033aa603905470e2a5b8c13e96b579ef0dba">Debug</a> = 1, </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <a class="code hl_enumvalue" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033a4059b0251f66a18cb56f544728796875">Info</a>  = 2, </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        <a class="code hl_enumvalue" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033a56525ae64d370c0b448ac0d60710ef17">Warn</a>  = 3, </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        <a class="code hl_enumvalue" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033a902b0d55fddef6f8d651fe1035b7d4bd">Error</a> = 4, </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <a class="code hl_enumvalue" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033a882384ec38ce8d9582b57e70861730e4">Fatal</a> = 5  </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    };</div>
</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="foldopen" id="foldopen00088" data-start="{" data-end="};">
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html">   88</a></span>    <span class="keyword">struct </span>DLL_EXPORT <a class="code hl_struct" href="../../d4/d98/structalib_1_1g3_1_1Logger.html">Logger</a>{</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <span class="keyword">using </span>targets_t = std::vector&lt;std::shared_ptr&lt;LogTarget&gt;&gt;;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        <span class="keyword">using </span>filters_t = std::vector&lt;std::shared_ptr&lt;LogFilter&gt;&gt;;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_struct" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html">LogFactory</a>;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a662778efdd67c58761ab2d6023049dbb">   95</a></span>        <a class="code hl_struct" href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html">LoggerConfig</a> <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a662778efdd67c58761ab2d6023049dbb">config</a>;       </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3bad9a4bdcef5f02ae416e20ffc1a9c5">   98</a></span>        targets_t <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3bad9a4bdcef5f02ae416e20ffc1a9c5">targets</a>;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac2bde7e69231f5699140a3b36c64aa5a">  100</a></span>        std::unordered_map&lt;std::string,RefWrapper&lt;targets_t&gt;&gt; <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac2bde7e69231f5699140a3b36c64aa5a">search_targets</a>;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2de22ddaba55c612c453602e3180f10b">  102</a></span>        filters_t <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2de22ddaba55c612c453602e3180f10b">filters</a>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac4de271bb7dcb3a1820e85c25ce91d1d">  104</a></span>        std::unordered_map&lt;std::string,RefWrapper&lt;filters_t&gt;&gt; <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac4de271bb7dcb3a1820e85c25ce91d1d">search_filters</a>;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a85f8d6af987f55d9272e4b191990d8e0">  107</a></span>        std::mutex <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a85f8d6af987f55d9272e4b191990d8e0">monotic_pool_lock</a>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a797d4430a202990c6edf0030eb5b0c4e">  109</a></span>        std::vector&lt;std::string&gt; <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a797d4430a202990c6edf0030eb5b0c4e">header_pool</a>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a4616857e40ee79b5ded0efddfed76911">  111</a></span>        std::pmr::polymorphic_allocator&lt;LogMsg&gt; <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a4616857e40ee79b5ded0efddfed76911">msg_alloc</a>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ae564073cf670d3cbb7c824d772c45cb8">  113</a></span>        std::pmr::unsynchronized_pool_resource <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ae564073cf670d3cbb7c824d772c45cb8">msg_buf</a>;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a84ed69fc840476ecb0941da724081204">  116</a></span>        std::pmr::deque&lt;LogMsg&gt; <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a84ed69fc840476ecb0941da724081204">messages</a>;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#aa46b9bed346c63cea196875d17bee5ff">  118</a></span>        std::atomic&lt;int&gt; <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#aa46b9bed346c63cea196875d17bee5ff">message_size</a>;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ae153abe31f561df40bea1d86b3d691d5">  121</a></span>        std::mutex <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ae153abe31f561df40bea1d86b3d691d5">msg_lock</a>;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ad5dcfdf581ef0d3b7645237cf5ffc37c">  123</a></span>        std::counting_semaphore&lt;semaphore_max_val&gt; <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ad5dcfdf581ef0d3b7645237cf5ffc37c">msg_semaphore</a>;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a8ecf4014046374d52aaca567ed39e6ab">  125</a></span>        std::vector&lt;std::thread&gt; <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a8ecf4014046374d52aaca567ed39e6ab">consumers</a>; </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a31093d805eb89b742b27938c12671843">  128</a></span>        uint64_t <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a31093d805eb89b742b27938c12671843">back_pressure_threshold</a>;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a4e165385dd472d18dbe525e89bb83d39">  130</a></span>        <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a4e165385dd472d18dbe525e89bb83d39">logger_not_on_destroying</a>;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ab3289fb4dd745aae462f42ff29c107a1">  132</a></span>        timespec <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ab3289fb4dd745aae462f42ff29c107a1">start_time</a>;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="keywordtype">void</span> setup_consumer_threads();</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        <span class="keywordtype">void</span> consumer_func();</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        <span class="keywordtype">size_t</span> fetch_messages(std::vector&lt;LogMsg&gt; &amp; target);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        std::string_view register_header(std::string_view val);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <span class="keyword">template</span>&lt;CanAccessItem T&gt; <span class="keywordtype">bool</span> safe_remove_mod(</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>            std::string_view key,</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>            std::unordered_map&lt;std::string,<a class="code hl_struct" href="../../d7/d20/structalib_1_1g3_1_1RefWrapper.html">RefWrapper&lt;T&gt;</a>&gt; &amp; st,</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>            T &amp; container</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        );</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        <span class="keywordtype">bool</span> push_message_pmr(<span class="keywordtype">int</span> level,std::string_view head,std::pmr::string &amp; body,<span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html">LogMsgConfig</a> &amp; cfg);</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2f25b1e0a200c78e2dc9593b8ad54331">  163</a></span>        std::pmr::polymorphic_allocator&lt;char&gt; <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2f25b1e0a200c78e2dc9593b8ad54331">msg_str_alloc</a>;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a118c9a9b65482b20a00b7b047e7d965f">  165</a></span>        std::pmr::synchronized_pool_resource <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a118c9a9b65482b20a00b7b047e7d965f">msg_str_buf</a>;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        <a class="code hl_struct" href="../../d4/d98/structalib_1_1g3_1_1Logger.html">Logger</a>(<span class="keyword">const</span> <a class="code hl_struct" href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html">LoggerConfig</a> &amp; cfg = <a class="code hl_struct" href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html">LoggerConfig</a>());</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        <span class="keywordtype">void</span> flush_targets();</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        <span class="keywordtype">void</span> flush();</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        <span class="keywordtype">void</span> write_messages(std::span&lt;LogMsg&gt; msg,<span class="keywordtype">bool</span> autoflush = <span class="keyword">true</span>);</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <span class="keywordtype">bool</span> push_message(<span class="keywordtype">int</span> level,std::string_view header,std::string_view body,<a class="code hl_struct" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html">LogMsgConfig</a> &amp; cfg);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="keyword">template</span>&lt;<span class="keyword">class </span>T,<span class="keyword">class</span>... Args&gt; std::shared_ptr&lt;T&gt; </div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>            append_mod(std::string_view name,Args&amp;&amp;... args);</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <span class="keyword">template</span>&lt;<span class="keyword">class</span> T = LogTarget&gt; <span class="keywordtype">bool</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>            remove_mod(std::string_view name);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        <span class="keywordtype">void</span> clear_filter();</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>        <span class="keywordtype">void</span> clear_target();</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        <span class="keywordtype">void</span> clear_mod();</div>
<div class="foldopen" id="foldopen00203" data-start="{" data-end="}">
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a93419addd82cd897ef8b85e1732ff952">  203</a></span>        <span class="keyword">template</span>&lt;IsLogMod T&gt; <span class="keyword">inline</span> T* <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a93419addd82cd897ef8b85e1732ff952">get_mod_raw</a>(std::string_view name){</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(<a class="code hl_concept" href="../../d0/d89/conceptalib_1_1g3_1_1IsLogTarget.html">IsLogTarget&lt;T&gt;</a>){</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>                <span class="keyword">auto</span> i = search_targets.find(std::string(name));</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>                <span class="keywordflow">if</span>(i == search_targets.end())<span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>                <span class="keywordflow">return</span> {<span class="keyword">dynamic_cast&lt;</span>T*<span class="keyword">&gt;</span>(i-&gt;second.get().get())};</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>            }<span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>                <span class="keyword">auto</span> i = search_filters.find(std::string(name));</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>                <span class="keywordflow">if</span>(i == search_filters.end())<span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                <span class="keywordflow">return</span> {<span class="keyword">dynamic_cast&lt;</span>T*<span class="keyword">&gt;</span>(i-&gt;second.get().get())};</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>            }</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        }</div>
</div>
<div class="foldopen" id="foldopen00215" data-start="{" data-end="}">
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a8f2548eb1f993ea381598e9e7df75b64">  215</a></span>        <span class="keyword">template</span>&lt;IsLogMod T&gt; <span class="keyword">inline</span> <span class="keyword">auto</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a8f2548eb1f993ea381598e9e7df75b64">get_mod_handle</a>(std::string_view name){</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>            <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(<a class="code hl_concept" href="../../d0/d89/conceptalib_1_1g3_1_1IsLogTarget.html">IsLogTarget&lt;T&gt;</a>){</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>                <span class="keyword">auto</span> i = search_targets.find(std::string(name));</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>                <span class="keywordflow">if</span>(i == search_targets.end())<span class="keywordflow">return</span> ref(targets,UINT32_MAX);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>                <span class="keywordflow">return</span> {i-&gt;second};</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>            }<span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>                <span class="keyword">auto</span> i = search_filters.find(std::string(name));</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>                <span class="keywordflow">if</span>(i == search_filters.end())<span class="keywordflow">return</span> ref(filters,UINT32_MAX);</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>                <span class="keywordflow">return</span> {i-&gt;second};</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>            }</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        }</div>
</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span> </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <a class="code hl_struct" href="../../d4/d98/structalib_1_1g3_1_1Logger.html">~Logger</a>();</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    };</div>
</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="foldopen" id="foldopen00233" data-start="{" data-end="};">
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html">  233</a></span>    <span class="keyword">struct </span>DLL_EXPORT <a class="code hl_struct" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html">LogFactory</a>{</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a857146b1c29ca47b4c91b6f34929798a">  235</a></span>        <a class="code hl_struct" href="../../d4/d98/structalib_1_1g3_1_1Logger.html">Logger</a>&amp; <a class="code hl_variable" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a857146b1c29ca47b4c91b6f34929798a">logger</a>;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#af9e01c47333727491fc1805d2ed0b358">  237</a></span>        <a class="code hl_struct" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html">LogFactoryConfig</a> <a class="code hl_variable" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#af9e01c47333727491fc1805d2ed0b358">cfg</a>;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        <a class="code hl_struct" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html">LogFactory</a>(</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            <a class="code hl_struct" href="../../d4/d98/structalib_1_1g3_1_1Logger.html">Logger</a> &amp; binded,</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>            <span class="keyword">const</span> <a class="code hl_struct" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html">LogFactoryConfig</a>&amp; = <a class="code hl_struct" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html">LogFactoryConfig</a>() </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        );</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="foldopen" id="foldopen00254" data-start="{" data-end="}">
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a2f16c76dce9863bbabbe98d44cb21f69">  254</a></span>        <span class="keyword">inline</span> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a2f16c76dce9863bbabbe98d44cb21f69">LogFactory</a>(</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            <a class="code hl_struct" href="../../d4/d98/structalib_1_1g3_1_1Logger.html">Logger</a> &amp; binded,</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            std::string_view header = <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>            <span class="keywordtype">int</span> def_level = 0,</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            <a class="code hl_typedef" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#adfd3979df6071ab0f89ccec3d5e1a9a7">LogFactoryConfig::LevelKeepFn</a> level_should_keep = <span class="keyword">nullptr</span>,</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            <span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html">LogMsgConfig</a>&amp; msg = <a class="code hl_struct" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html">LogMsgConfig</a>()</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        ):logger(binded){</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>            cfg = <a class="code hl_struct" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html">LogFactoryConfig</a>(header,def_level,level_should_keep,msg);</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            <span class="keywordflow">if</span>(cfg.header.compare(<span class="stringliteral">&quot;&quot;</span>))cfg.header = binded.<a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3eb1b3baeeb639994478226c11dd9cda">register_header</a>(cfg.header);</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        }</div>
</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="foldopen" id="foldopen00266" data-start="{" data-end="}">
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a4fe23f99da488626ee830547c6b00c22">  266</a></span>        <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a4fe23f99da488626ee830547c6b00c22">log</a>(<span class="keywordtype">int</span> level,std::string_view message){</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>            <span class="keywordflow">if</span>(cfg.level_should_keep &amp;&amp; !cfg.level_should_keep(level))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            <span class="keywordflow">return</span> logger.push_message(level,<span class="stringliteral">&quot;&quot;</span>,message,cfg.msg);</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        }</div>
</div>
<div class="foldopen" id="foldopen00271" data-start="{" data-end="}">
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a96a0a1145b01ed7e039d9f7f3a772847">  271</a></span>        <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a96a0a1145b01ed7e039d9f7f3a772847">log</a>(<a class="code hl_enumeration" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033">LogLevel</a> level,std::string_view message){</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>            <span class="keywordflow">return</span> log(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(level),message);</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        }</div>
</div>
<div class="foldopen" id="foldopen00275" data-start="{" data-end="}">
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a4b6ef169d534ee2481cfe39ecc987277">  275</a></span>        <span class="keyword">template</span>&lt;<span class="keyword">class</span>... Args&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a4b6ef169d534ee2481cfe39ecc987277">log</a>(<span class="keywordtype">int</span> level,std::string_view fmt,Args&amp;&amp;... args){</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>            <span class="keywordflow">if</span>(cfg.level_should_keep &amp;&amp; !cfg.level_should_keep(level))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>            </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>            std::pmr::string str (logger.msg_str_alloc);</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>            std::vformat_to(std::back_inserter(str),fmt,std::make_format_args(args...));</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            <span class="keywordflow">return</span> logger.push_message_pmr(level,cfg.header,str,cfg.msg);</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        }</div>
</div>
<div class="foldopen" id="foldopen00283" data-start="{" data-end="}">
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#aede09f539eef7646d7f688b976e13356">  283</a></span>        <span class="keyword">template</span>&lt;<span class="keyword">class</span>... Args&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#aede09f539eef7646d7f688b976e13356">log_fast</a>(<span class="keywordtype">int</span> level,<span class="keyword">const</span> std::format_string&lt;Args...&gt;&amp; fmt,Args&amp;&amp;... args){</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>            <span class="keywordflow">if</span>(cfg.level_should_keep &amp;&amp; !cfg.level_should_keep(level))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>            </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>            std::pmr::string str (logger.msg_str_alloc);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>            std::vformat_to(std::back_inserter(str),fmt.get(),std::make_format_args(args...));</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>            <span class="keywordflow">return</span> logger.push_message_pmr(level,cfg.header,str,cfg.msg);</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        }</div>
</div>
<div class="foldopen" id="foldopen00291" data-start="{" data-end="}">
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a9e4843af9dfa0b115c98aff0ddeaefd1">  291</a></span>        <span class="keyword">template</span>&lt;<span class="keyword">class</span>... Args&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a9e4843af9dfa0b115c98aff0ddeaefd1">log</a>(<a class="code hl_enumeration" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033">LogLevel</a> level,std::string_view fmt,Args&amp;&amp;... args){</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>            <span class="keywordflow">return</span> log(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(level),fmt,std::forward&lt;Args&gt;(args)...);</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        }</div>
</div>
<div class="foldopen" id="foldopen00295" data-start="{" data-end="}">
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#ac94a2eec1ef052dc81773f4cec85f961">  295</a></span>        <span class="keyword">template</span>&lt;<span class="keyword">class</span>... Args&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#ac94a2eec1ef052dc81773f4cec85f961">log</a>(<a class="code hl_enumeration" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033">LogLevel</a> level,<span class="keyword">const</span> std::format_string&lt;Args...&gt;&amp; fmt,Args&amp;&amp;... args){</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>            <span class="keywordflow">return</span> log_fast(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(level),fmt,std::forward&lt;Args&gt;(args)...);</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        }</div>
</div>
<div class="foldopen" id="foldopen00300" data-start="{" data-end="}">
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a984ab8afda501dd68f801c207e03124d">  300</a></span>        <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a984ab8afda501dd68f801c207e03124d">log_pmr</a>(<span class="keywordtype">int</span> level,std::pmr::string &amp; pmr_data,<span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html">LogMsgConfig</a> &amp; mcfg){</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>            <span class="keywordflow">if</span>(cfg.level_should_keep &amp;&amp; !cfg.level_should_keep(level))<span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>            </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>            <span class="keywordflow">return</span> logger.push_message_pmr(level,cfg.header,pmr_data,mcfg);</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        }</div>
</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="foldopen" id="foldopen00307" data-start="{" data-end="}">
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#ac6e890ccb245bb623f6c69622a2d9f40">  307</a></span>        <span class="keyword">inline</span> <a class="code hl_struct" href="../../d5/d56/structalib_1_1g3_1_1StreamedContext.html">StreamedContext&lt;LogFactory&gt;</a> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#ac6e890ccb245bb623f6c69622a2d9f40">operator()</a>(){</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            <span class="keywordtype">bool</span> valid = !cfg.level_should_keep || cfg.level_should_keep(cfg.def_level);</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="../../d5/d56/structalib_1_1g3_1_1StreamedContext.html">StreamedContext&lt;LogFactory&gt;</a>(cfg.def_level,*<span class="keyword">this</span>,valid);</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        }</div>
</div>
<div class="foldopen" id="foldopen00312" data-start="{" data-end="}">
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#ae408732d5cd37659f87f99c8610dfd81">  312</a></span>        <span class="keyword">inline</span> <a class="code hl_struct" href="../../d5/d56/structalib_1_1g3_1_1StreamedContext.html">StreamedContext&lt;LogFactory&gt;</a> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#ae408732d5cd37659f87f99c8610dfd81">operator()</a>(<span class="keywordtype">int</span> spec_level){</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>            <span class="keywordtype">bool</span> valid = !cfg.level_should_keep || cfg.level_should_keep(cfg.def_level);</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="../../d5/d56/structalib_1_1g3_1_1StreamedContext.html">StreamedContext&lt;LogFactory&gt;</a>(spec_level,*<span class="keyword">this</span>,valid);</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        }</div>
</div>
<div class="foldopen" id="foldopen00317" data-start="{" data-end="}">
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a8e626bb498e40ab927c3112322d97eec">  317</a></span>        <span class="keyword">inline</span> <a class="code hl_struct" href="../../d5/d56/structalib_1_1g3_1_1StreamedContext.html">StreamedContext&lt;LogFactory&gt;</a> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a8e626bb498e40ab927c3112322d97eec">operator()</a>(<a class="code hl_enumeration" href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033">LogLevel</a> spec_level){</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>            <span class="keywordtype">bool</span> valid = !cfg.level_should_keep || cfg.level_should_keep(cfg.def_level);</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="../../d5/d56/structalib_1_1g3_1_1StreamedContext.html">StreamedContext&lt;LogFactory&gt;</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(spec_level),*<span class="keyword">this</span>,valid);</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        }</div>
</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span> <a class="code hl_struct" href="../../d5/d56/structalib_1_1g3_1_1StreamedContext.html">StreamedContext&lt;LogFactory&gt;</a> operator&lt;&lt;(T &amp;&amp; t){</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>            <span class="keywordtype">bool</span> valid = !cfg.level_should_keep || cfg.level_should_keep(cfg.def_level);</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="../../d5/d56/structalib_1_1g3_1_1StreamedContext.html">StreamedContext&lt;LogFactory&gt;</a>(cfg.def_level,*<span class="keyword">this</span>,valid) &lt;&lt; t;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        } </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    };</div>
</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>};</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span><span class="keyword">namespace </span><a class="code hl_namespace" href="../../d1/d27/namespacealib_1_1g3.html">alib::g3</a>{</div>
<div class="foldopen" id="foldopen00331" data-start="{" data-end="}">
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno"><a class="line" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#ad7c570f5c760e61aa98a252e6befac29">  331</a></span>    <span class="keyword">inline</span> <a class="code hl_function" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#ad7c570f5c760e61aa98a252e6befac29">LogMsgConfig::LogMsgConfig</a>(){</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        <a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a67ae3427a677b8c8f6ad933c8121f037">gen_thread_id</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>        <a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a53569bb4390d73b2cd6505eb0f08b7a3">gen_time</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        <a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a4fc4e8047952f50149850313648e3261">gen_date</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        <a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#aa6e66b3df14ac3dd23985e24f0bc1bfc">out_header</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>        <a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a34b0feee729dbe98466f6e2acd0c010a">out_level</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        <a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a90533893f517d9c295327d26f9d92bcc">disable_extra_information</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        <a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a27f972d9fab774c494a2ff199c44e8ef">level_cast</a> = <a class="code hl_function" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a979322c23638b46dfc917309387c3d12">default_level_cast</a>;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    }</div>
</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="foldopen" id="foldopen00341" data-start="{" data-end="}">
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno"><a class="line" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a979322c23638b46dfc917309387c3d12">  341</a></span>    <span class="keyword">inline</span> std::string_view <a class="code hl_function" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a979322c23638b46dfc917309387c3d12">LogMsgConfig::default_level_cast</a>(<span class="keywordtype">int</span> level_in){</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>        <span class="keywordflow">switch</span>(level_in){</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;TRACE&quot;</span>;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;DEBUG&quot;</span>;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;INFO &quot;</span>;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;WARN &quot;</span>;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;ERROR&quot;</span>;</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        <span class="keywordflow">case</span> 5:</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;FATAL&quot;</span>;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>            <span class="keywordflow">return</span> <span class="stringliteral">&quot;?????&quot;</span>;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        }</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    }</div>
</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="foldopen" id="foldopen00360" data-start="{" data-end="}">
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno"><a class="line" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a3ca560cb894546f2aad6cf7482547577">  360</a></span>    <span class="keyword">inline</span> <a class="code hl_function" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae45724f1796842e5265e606136312fe2">LogMsg::LogMsg</a>(<span class="keyword">const</span> std::pmr::polymorphic_allocator&lt;char&gt; &amp;__a,<span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html">LogMsgConfig</a> &amp; c)</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    :body(__a)</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    ,cfg(c){</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        m_nice_one = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        generated = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    }</div>
</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span> </div>
<div class="foldopen" id="foldopen00367" data-start="{" data-end="}">
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno"><a class="line" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7e5a60394226e24f77be85e2479f27f0">  367</a></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7e5a60394226e24f77be85e2479f27f0">LogMsg::build_on_producer</a>(<span class="keyword">const</span> timespec &amp; start){</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a90533893f517d9c295327d26f9d92bcc">disable_extra_information</a>)<span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a67ae3427a677b8c8f6ad933c8121f037">gen_thread_id</a>){</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#af9f4415a9a7b4775b29eb5a4a6979550">thread_id</a> =</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>                std::hash&lt;std::thread::id&gt;{}(std::this_thread::get_id())</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>            );</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        }</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a53569bb4390d73b2cd6505eb0f08b7a3">gen_time</a>){</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            timespec spec;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>            clock_gettime(<a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#a28d42b4f8e8e1d67c20c7f517d68e6a7">time_clock_source</a>,&amp;spec);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>            <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a462d4e038715dab4e82df596f590ee60">timestamp</a> = (spec.tv_sec - start.tv_sec)*1000 + (spec.tv_nsec - start.tv_nsec)/1&#39;000&#39;000.0;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    }</div>
</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span> </div>
<div class="foldopen" id="foldopen00382" data-start="{" data-end="}">
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno"><a class="line" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a8ffc7f4dcbaab62bbdef18d3c4aafaec">  382</a></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a8ffc7f4dcbaab62bbdef18d3c4aafaec">LogMsg::build_on_consumer</a>(){</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a90533893f517d9c295327d26f9d92bcc">disable_extra_information</a>)<span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        [[maybe_unused]] <span class="keyword">thread_local</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> inited = [&amp;]{</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7f1bdbfa23a1aba75f597df2f39a606a">sdate</a>.resize(<a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#aed2c3a17127a4eb7934ab6413403a224">date_str_resize</a>);</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        }();</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a4fc4e8047952f50149850313648e3261">gen_date</a>){</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>            <span class="keyword">static</span> <span class="keyword">thread_local</span> time_t old_time = 0;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>            time_t rawtime;</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>            time(&amp;rawtime);</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            <span class="keywordflow">if</span>(rawtime != old_time){</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>                <span class="keyword">struct </span>tm ptminfo;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span><span class="preprocessor">                #ifdef __linux</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>                <a class="code hl_define" href="../../d0/daa/kernel_8h.html#ad85a1673de24e63499ec05c1dbd63487">__internal_alib_localtime</a>(&amp;rawtime,&amp;ptminfo);</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span><span class="preprocessor">                #else</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>                <a class="code hl_define" href="../../d0/daa/kernel_8h.html#ad85a1673de24e63499ec05c1dbd63487">__internal_alib_localtime</a>(&amp;ptminfo,&amp;rawtime);</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span><span class="preprocessor">                #endif</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>                <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7f1bdbfa23a1aba75f597df2f39a606a">sdate</a>.clear();</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>                <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7f1bdbfa23a1aba75f597df2f39a606a">sdate</a>.resize(<a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#aed2c3a17127a4eb7934ab6413403a224">date_str_resize</a>);</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>                <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7f1bdbfa23a1aba75f597df2f39a606a">sdate</a>.resize(snprintf(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7f1bdbfa23a1aba75f597df2f39a606a">sdate</a>.data(),<a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#aed2c3a17127a4eb7934ab6413403a224">date_str_resize</a>,<span class="stringliteral">&quot;%02d-%02d-%02d %02d:%02d:%02d&quot;</span>,</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>                    ptminfo.tm_year + 1900, ptminfo.tm_mon + 1, ptminfo.tm_mday,</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>                    ptminfo.tm_hour, ptminfo.tm_min, ptminfo.tm_sec));</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>               old_time = rawtime;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>            }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        }</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    }</div>
</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span> </div>
<div class="foldopen" id="foldopen00409" data-start="{" data-end="}">
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno"><a class="line" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a316ec428427bf6fbec46f2f44c488a01">  409</a></span>    <span class="keyword">inline</span> std::string_view <a class="code hl_function" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a316ec428427bf6fbec46f2f44c488a01">LogMsg::gen_composed</a>(){</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a90533893f517d9c295327d26f9d92bcc">disable_extra_information</a>){<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a35e2b73731c6ed4664c7fbf3787b687d">body</a>.push_back(<span class="charliteral">&#39;\n&#39;</span>);<span class="keywordflow">return</span> <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a35e2b73731c6ed4664c7fbf3787b687d">body</a>;}</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        [[maybe_unused]] <span class="keyword">static</span> <span class="keyword">thread_local</span> <span class="keywordtype">bool</span> inited = [&amp;]{</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>            <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.clear();</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>            <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.resize(<a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#afe9d30864be1be49f051a75205d9885e">compose_str_resize</a>);</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        }();</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        <span class="comment">// 只要保证按照LogMsg的顺序递归而不是lot，那么这个就是valid的</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>        <span class="keywordflow">if</span>(generated)<span class="keywordflow">return</span> <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>;</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        <span class="keywordtype">size_t</span> beg = 0;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.clear();</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.resize(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.capacity());</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a4fc4e8047952f50149850313648e3261">gen_date</a>)beg += snprintf(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.data() + beg,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.size() - beg,</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            <span class="stringliteral">&quot;[%s]&quot;</span>,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7f1bdbfa23a1aba75f597df2f39a606a">sdate</a>.c_str());</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a34b0feee729dbe98466f6e2acd0c010a">out_level</a> &amp;&amp; <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a27f972d9fab774c494a2ff199c44e8ef">level_cast</a>)beg += snprintf(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.data() + beg,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.size() - beg,</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>            <span class="stringliteral">&quot;[%s]&quot;</span>,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a27f972d9fab774c494a2ff199c44e8ef">level_cast</a>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#aa6bdf4277f9fc5f40efaad28c541be64">level</a>).data());</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#aa6e66b3df14ac3dd23985e24f0bc1bfc">out_header</a> &amp;&amp; <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a98ec3bac0a0e93ff2fa51a24e59a1830">header</a>.data() != <span class="keyword">nullptr</span> &amp;&amp; <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a98ec3bac0a0e93ff2fa51a24e59a1830">header</a>.size())beg += snprintf(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.data() + beg,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.size() - beg,</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            <span class="stringliteral">&quot;[%s]&quot;</span>,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a98ec3bac0a0e93ff2fa51a24e59a1830">header</a>.data());</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a53569bb4390d73b2cd6505eb0f08b7a3">gen_time</a>)beg += snprintf(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.data() + beg,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.size() - beg,</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            <span class="stringliteral">&quot;[%.2lfms]&quot;</span>,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a462d4e038715dab4e82df596f590ee60">timestamp</a>);</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a>.<a class="code hl_variable" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a67ae3427a677b8c8f6ad933c8121f037">gen_thread_id</a>)beg += snprintf(<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.data() + beg,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.size() - beg,</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            <span class="stringliteral">&quot;[TID%lu]&quot;</span>,<a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#af9f4415a9a7b4775b29eb5a4a6979550">thread_id</a>);</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.resize(beg);</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.append(<span class="stringliteral">&quot;:&quot;</span>);</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>        </div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a> += <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a35e2b73731c6ed4664c7fbf3787b687d">body</a>;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>.append(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        generated = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">scomposed</a>;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    }</div>
</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span> </div>
<div class="foldopen" id="foldopen00442" data-start="{" data-end="}">
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno"><a class="line" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#aae7b9594193672746aa855b3504d8fc4">  442</a></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#aae7b9594193672746aa855b3504d8fc4">LogMsg::move_msg</a>(<a class="code hl_struct" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html">LogMsg</a>&amp;&amp; msg){</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a98ec3bac0a0e93ff2fa51a24e59a1830">header</a> = msg.header;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        generated = msg.generated;</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>        m_nice_one = msg.m_nice_one;</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#af9f4415a9a7b4775b29eb5a4a6979550">thread_id</a> = msg.thread_id;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a35e2b73731c6ed4664c7fbf3787b687d">body</a> = std::move(msg.body);</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a462d4e038715dab4e82df596f590ee60">timestamp</a> = msg.timestamp;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">cfg</a> = msg.cfg;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        <a class="code hl_variable" href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#aa6bdf4277f9fc5f40efaad28c541be64">level</a> = msg.level;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    }</div>
</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span> </div>
<div class="foldopen" id="foldopen00453" data-start="{" data-end="}">
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno"><a class="line" href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a0b489b0b77978a7cad7afb5e3cd4c814">  453</a></span>    <span class="keyword">inline</span> <a class="code hl_function" href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a0b489b0b77978a7cad7afb5e3cd4c814">LoggerConfig::LoggerConfig</a>(){</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        <span class="comment">// 默认就是单consumer的形式</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        <a class="code hl_variable" href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a95c27af44013e2cf4d2e2d9fa42681b4">consumer_count</a> = 1;</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        <a class="code hl_variable" href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a52020a69b094a5f306cd94ca41d13563">fetch_message_count_max</a> = <a class="code hl_variable" href="../../d1/d27/namespacealib_1_1g3.html#aa8d3491bbafbd1d8e75ca20d86404283">consumer_message_default_count</a>;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        <a class="code hl_variable" href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a20507fcdf4b780991d549d60f442bb9e">back_pressure_multiply</a> = 4; </div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        <a class="code hl_variable" href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a58958133c7a4052b73218d198ec5c51c">enable_back_pressure</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    }</div>
</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span> </div>
<div class="foldopen" id="foldopen00461" data-start="{" data-end="}">
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a569081966f3c0719f70f930d4148baa3">  461</a></span>    <span class="keyword">template</span>&lt;CanAccessItem T&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a569081966f3c0719f70f930d4148baa3">Logger::safe_remove_mod</a>(</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        std::string_view key,</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>        std::unordered_map&lt;std::string,<a class="code hl_struct" href="../../d7/d20/structalib_1_1g3_1_1RefWrapper.html">RefWrapper&lt;T&gt;</a>&gt; &amp; st,</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>        T &amp; container</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    ){</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        <span class="keyword">auto</span> it = st.find(std::string(key));</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>        <span class="keywordflow">if</span>(it == st.end()){</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>        }</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>        <span class="comment">// 旧的target不需要手动关闭，因为析构函数自动关闭了</span></div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        <span class="comment">// 不懂为什么要先erase it，但是Gemini大王发话了还特别固执</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>        <span class="keywordtype">size_t</span> cached_index = it-&gt;second.index;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>        st.erase(it);</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        <span class="comment">// 后面的index都要减少一个</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; [key,val] : st){</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>            <span class="keywordflow">if</span>(val.index &gt; cached_index)val--;</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>        }</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>        container.erase(container.begin() + cached_index);</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    }</div>
</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="foldopen" id="foldopen00482" data-start="{" data-end="}">
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#acdc0b471c22ae9a4260b4e0eac0db40b">  482</a></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#acdc0b471c22ae9a4260b4e0eac0db40b">Logger::flush_targets</a>(){</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>        <span class="comment">// flush targets</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; target : <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3bad9a4bdcef5f02ae416e20ffc1a9c5">targets</a>){</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>            <span class="keywordflow">if</span>(!target-&gt;enabled)<span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            target-&gt;flush();</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>        }</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    }</div>
</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="foldopen" id="foldopen00490" data-start="{" data-end="}">
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a5492c60da2f1b2b82c0cbb60ba241b4a">  490</a></span>    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a5492c60da2f1b2b82c0cbb60ba241b4a">Logger::push_message</a>(<span class="keywordtype">int</span> level,std::string_view header,std::string_view body,<a class="code hl_struct" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html">LogMsgConfig</a> &amp; cfg){</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>        std::pmr::string str(<a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2f25b1e0a200c78e2dc9593b8ad54331">msg_str_alloc</a>);</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>        str.assign(body);</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a5986d2190342f2ad677e1d59cf804fe9">push_message_pmr</a>(level,header,str,cfg);</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    }</div>
</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span> </div>
<div class="foldopen" id="foldopen00496" data-start="{" data-end="}">
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a868a3b173dc32126bd8abc5d1ff0e948">  496</a></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a868a3b173dc32126bd8abc5d1ff0e948">Logger::clear_filter</a>(){</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac4de271bb7dcb3a1820e85c25ce91d1d">search_filters</a>.clear();</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2de22ddaba55c612c453602e3180f10b">filters</a>.clear();</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    }</div>
</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span> </div>
<div class="foldopen" id="foldopen00501" data-start="{" data-end="}">
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a919a4b64f79593de8452fa4f48e71363">  501</a></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a919a4b64f79593de8452fa4f48e71363">Logger::clear_target</a>(){</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac2bde7e69231f5699140a3b36c64aa5a">search_targets</a>.clear();</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3bad9a4bdcef5f02ae416e20ffc1a9c5">targets</a>.clear();</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    }</div>
</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span> </div>
<div class="foldopen" id="foldopen00507" data-start="{" data-end="}">
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a9257b3cd4a84642ece4bdb542f2cfc52">  507</a></span>    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a9257b3cd4a84642ece4bdb542f2cfc52">Logger::clear_mod</a>(){</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a919a4b64f79593de8452fa4f48e71363">clear_target</a>();</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a868a3b173dc32126bd8abc5d1ff0e948">clear_filter</a>();</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    }</div>
</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span> </div>
<div class="foldopen" id="foldopen00512" data-start="{" data-end="}">
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#aa3a622312fdfa2c2c2b84282fedd3770">  512</a></span>    <span class="keyword">template</span>&lt;<span class="keyword">class </span>T,<span class="keyword">class</span>... Args&gt; <span class="keyword">inline</span> std::shared_ptr&lt;T&gt; <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#aa3a622312fdfa2c2c2b84282fedd3770">Logger::append_mod</a>(std::string_view name,Args&amp;&amp;... args){</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        <span class="keyword">static_assert</span>(std::is_base_of_v&lt;LogTarget,T&gt; || std::is_base_of_v&lt;LogFilter,T&gt;,</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            <span class="stringliteral">&quot;T must be the derived class of LogTarget or LogFilter!&quot;</span>);</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        <span class="keyword">auto</span> ptr = std::make_shared&lt;T&gt;(std::forward&lt;Args&gt;(args)...);</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>        </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(std::is_base_of_v&lt;LogTarget,T&gt;){</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>            <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac2bde7e69231f5699140a3b36c64aa5a">search_targets</a>.find(std::string(name));</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>            <span class="keywordflow">if</span>(it == <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac2bde7e69231f5699140a3b36c64aa5a">search_targets</a>.end()){</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>                <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3bad9a4bdcef5f02ae416e20ffc1a9c5">targets</a>.push_back(ptr);</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>                <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac2bde7e69231f5699140a3b36c64aa5a">search_targets</a>.emplace(name,ref(<a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3bad9a4bdcef5f02ae416e20ffc1a9c5">targets</a>,<a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3bad9a4bdcef5f02ae416e20ffc1a9c5">targets</a>.size() - 1));</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>            }<span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>                it-&gt;second = ptr;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>            }</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        }<span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac4de271bb7dcb3a1820e85c25ce91d1d">search_filters</a>.find(std::string(name));</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>            <span class="keywordflow">if</span>(it == <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac4de271bb7dcb3a1820e85c25ce91d1d">search_filters</a>.end()){</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>                <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2de22ddaba55c612c453602e3180f10b">filters</a>.push_back(ptr);</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>                <a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac4de271bb7dcb3a1820e85c25ce91d1d">search_filters</a>.emplace(name,ref(<a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2de22ddaba55c612c453602e3180f10b">filters</a>,<a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2de22ddaba55c612c453602e3180f10b">filters</a>.size() - 1));</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>            }<span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>                it-&gt;second = ptr;</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            }</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        }</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        <span class="keywordflow">return</span> ptr;</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    }</div>
</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="foldopen" id="foldopen00538" data-start="{" data-end="}">
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno"><a class="line" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ad58fd8112c064466c9b28e581fb067d1">  538</a></span>    <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ad58fd8112c064466c9b28e581fb067d1">Logger::remove_mod</a>(std::string_view name){</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>        <span class="keyword">static_assert</span>(std::is_same_v&lt;LogTarget,T&gt; || std::is_same_v&lt;LogFilter,T&gt;,</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            <span class="stringliteral">&quot;T must be one of LogTarget or LogFilter!&quot;</span>);</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>        <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(std::is_same_v&lt;LogTarget,T&gt;){</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a569081966f3c0719f70f930d4148baa3">safe_remove_mod</a>(name,<a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac2bde7e69231f5699140a3b36c64aa5a">search_targets</a>,<a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3bad9a4bdcef5f02ae416e20ffc1a9c5">targets</a>);</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>        }<span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a569081966f3c0719f70f930d4148baa3">safe_remove_mod</a>(name,<a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac4de271bb7dcb3a1820e85c25ce91d1d">search_filters</a>,<a class="code hl_variable" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2de22ddaba55c612c453602e3180f10b">filters</a>);</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>        }</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    }</div>
</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span> </div>
<div class="foldopen" id="foldopen00548" data-start="{" data-end="}">
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno"><a class="line" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#aac0f7b72d6ca9604c25d3b3612c18beb">  548</a></span>    <span class="keyword">inline</span> <a class="code hl_function" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#aac0f7b72d6ca9604c25d3b3612c18beb">LogFactory::LogFactory</a>(</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        <a class="code hl_struct" href="../../d4/d98/structalib_1_1g3_1_1Logger.html">Logger</a> &amp; binded,</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>        <span class="keyword">const</span> <a class="code hl_struct" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html">LogFactoryConfig</a> &amp; icfg</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    ):logger(binded){</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        <a class="code hl_variable" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#af9e01c47333727491fc1805d2ed0b358">cfg</a> = icfg;</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#af9e01c47333727491fc1805d2ed0b358">cfg</a>.<a class="code hl_variable" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#ac277a2e7cdf8046565911987259022f8">header</a>.compare(<span class="stringliteral">&quot;&quot;</span>)){</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            <a class="code hl_variable" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#af9e01c47333727491fc1805d2ed0b358">cfg</a>.<a class="code hl_variable" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#ac277a2e7cdf8046565911987259022f8">header</a> = binded.<a class="code hl_function" href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3eb1b3baeeb639994478226c11dd9cda">register_header</a>(<a class="code hl_variable" href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#af9e01c47333727491fc1805d2ed0b358">cfg</a>.<a class="code hl_variable" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#ac277a2e7cdf8046565911987259022f8">header</a>);</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        }</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    }</div>
</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span> </div>
<div class="foldopen" id="foldopen00558" data-start="{" data-end="}">
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno"><a class="line" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#af2b70badcf9f086ae9bf556b24577451">  558</a></span>    <span class="keyword">inline</span> <a class="code hl_function" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#af2b70badcf9f086ae9bf556b24577451">LogFactoryConfig::LogFactoryConfig</a>(</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>        std::string_view iheader,</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>        <span class="keywordtype">int</span> idef_level,</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        <a class="code hl_typedef" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#adfd3979df6071ab0f89ccec3d5e1a9a7">LogFactoryConfig::LevelKeepFn</a> ilevel_should_keep,</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        <span class="keyword">const</span> <a class="code hl_struct" href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html">LogMsgConfig</a>&amp; msg_cfg</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    ){</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>        <a class="code hl_variable" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#ac277a2e7cdf8046565911987259022f8">header</a> = iheader;</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>        <a class="code hl_variable" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#a865383b902f39d57fbf0e815fb87886a">def_level</a> = idef_level;</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        <a class="code hl_variable" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#a5cf6caf0fedc0d6b80eee268f437f58a">level_should_keep</a> = ilevel_should_keep;</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        <a class="code hl_variable" href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#a67d229b7b23167e5a4ea8238e248c094">msg</a> = msg_cfg;</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    }</div>
</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>}</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span> </div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aaclock_8h_html"><div class="ttname"><a href="../../d6/dd9/aclock_8h.html">aclock.h</a></div><div class="ttdoc">与计时有关的函数与类</div></div>
<div class="ttc" id="aalib-g3_2autil_8h_html"><div class="ttname"><a href="../../d5/d6c/alib-g3_2autil_8h.html">autil.h</a></div><div class="ttdoc">工具库，提供IO、字符串、系统数据等静态函数</div></div>
<div class="ttc" id="aaref_8h_html"><div class="ttname"><a href="../../d0/de9/aref_8h.html">aref.h</a></div><div class="ttdoc">不会悬垂的比较安全的容器数据wrapper,Release下单次性能损失为0.3ns</div></div>
<div class="ttc" id="aconceptalib_1_1g3_1_1IsLogTarget_html"><div class="ttname"><a href="../../d0/d89/conceptalib_1_1g3_1_1IsLogTarget.html">alib::g3::IsLogTarget</a></div><div class="ttdef"><b>Definition</b> base_mod.h:89</div></div>
<div class="ttc" id="akernel_8h_html_ad85a1673de24e63499ec05c1dbd63487"><div class="ttname"><a href="../../d0/daa/kernel_8h.html#ad85a1673de24e63499ec05c1dbd63487">__internal_alib_localtime</a></div><div class="ttdeci">#define __internal_alib_localtime</div><div class="ttdef"><b>Definition</b> kernel.h:48</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html">alib::g3</a></div><div class="ttdoc">第三代alib:更加优秀的api以及性能（相比于alib-g2)，主要拿来给自己使用。</div><div class="ttdef"><b>Definition</b> alogger_old.cpp:413</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_a28d42b4f8e8e1d67c20c7f517d68e6a7"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#a28d42b4f8e8e1d67c20c7f517d68e6a7">alib::g3::time_clock_source</a></div><div class="ttdeci">constexpr int time_clock_source</div><div class="ttdoc">时钟源，简易能选择的话选择最快的MONOTIC_COARSE</div><div class="ttdef"><b>Definition</b> kernel.h:73</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_a4b7acd0425b0ff99f06ea2309b0214b4"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#a4b7acd0425b0ff99f06ea2309b0214b4">alib::g3::semaphore_max_val</a></div><div class="ttdeci">constexpr unsigned int semaphore_max_val</div><div class="ttdoc">最多可以有多少信号，默认最大值就行</div><div class="ttdef"><b>Definition</b> kernel.h:65</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_a87e3a6538c70283c5c83ddefa061b033"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033">alib::g3::LogLevel</a></div><div class="ttdeci">LogLevel</div><div class="ttdoc">默认的loglevel标识，纯粹方便使用的</div><div class="ttdef"><b>Definition</b> kernel.h:78</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_a87e3a6538c70283c5c83ddefa061b033a4059b0251f66a18cb56f544728796875"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033a4059b0251f66a18cb56f544728796875">alib::g3::LogLevel::Info</a></div><div class="ttdeci">@ Info</div><div class="ttdoc">Info 级别，普通日志信息</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_a87e3a6538c70283c5c83ddefa061b033a56525ae64d370c0b448ac0d60710ef17"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033a56525ae64d370c0b448ac0d60710ef17">alib::g3::LogLevel::Warn</a></div><div class="ttdeci">@ Warn</div><div class="ttdoc">Warn 级别，出了点小问题</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_a87e3a6538c70283c5c83ddefa061b033a882384ec38ce8d9582b57e70861730e4"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033a882384ec38ce8d9582b57e70861730e4">alib::g3::LogLevel::Fatal</a></div><div class="ttdeci">@ Fatal</div><div class="ttdoc">Fatal级别，不能接受的超级大问题</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_a87e3a6538c70283c5c83ddefa061b033a902b0d55fddef6f8d651fe1035b7d4bd"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033a902b0d55fddef6f8d651fe1035b7d4bd">alib::g3::LogLevel::Error</a></div><div class="ttdeci">@ Error</div><div class="ttdoc">Error级别，问题大了点，能接受</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_a87e3a6538c70283c5c83ddefa061b033aa603905470e2a5b8c13e96b579ef0dba"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033aa603905470e2a5b8c13e96b579ef0dba">alib::g3::LogLevel::Debug</a></div><div class="ttdeci">@ Debug</div><div class="ttdoc">Debug级别，一般用在Debug环境下</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_a87e3a6538c70283c5c83ddefa061b033add4ec0ac4e58f7c32a01244ae91150b1"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#a87e3a6538c70283c5c83ddefa061b033add4ec0ac4e58f7c32a01244ae91150b1">alib::g3::LogLevel::Trace</a></div><div class="ttdeci">@ Trace</div><div class="ttdoc">Trace级别，基本上没什么业务意义</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_aa8d3491bbafbd1d8e75ca20d86404283"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#aa8d3491bbafbd1d8e75ca20d86404283">alib::g3::consumer_message_default_count</a></div><div class="ttdeci">constexpr unsigned int consumer_message_default_count</div><div class="ttdoc">Consumer构建的时候预留多少msg槽位（运行时可对齐到fetch_max_size的）</div><div class="ttdef"><b>Definition</b> kernel.h:67</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_acfef9ad84f0d182e75aebda76a7fdc13"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#acfef9ad84f0d182e75aebda76a7fdc13">alib::g3::config_pool_reserve_size</a></div><div class="ttdeci">constexpr int config_pool_reserve_size</div><div class="ttdoc">配置池预留大小，目前LogMsg引用配置有一个很小的概率（-&gt;0）悬垂，看看能不能处理好</div><div class="ttdef"><b>Definition</b> kernel.h:75</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_aed2c3a17127a4eb7934ab6413403a224"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#aed2c3a17127a4eb7934ab6413403a224">alib::g3::date_str_resize</a></div><div class="ttdeci">constexpr unsigned int date_str_resize</div><div class="ttdoc">日期字符串预留的空间，一般格式化没问题的</div><div class="ttdef"><b>Definition</b> kernel.h:69</div></div>
<div class="ttc" id="anamespacealib_1_1g3_html_afe9d30864be1be49f051a75205d9885e"><div class="ttname"><a href="../../d1/d27/namespacealib_1_1g3.html#afe9d30864be1be49f051a75205d9885e">alib::g3::compose_str_resize</a></div><div class="ttdeci">constexpr unsigned int compose_str_resize</div><div class="ttdoc">每个组合字符串预留的空间，1024可满足小内容日志，运行时也可以根据raw数据大小扩展</div><div class="ttdef"><b>Definition</b> kernel.h:71</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactoryConfig_html"><div class="ttname"><a href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html">alib::g3::LogFactoryConfig</a></div><div class="ttdoc">LogFactory配置</div><div class="ttdef"><b>Definition</b> base_config.h:53</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactoryConfig_html_a5cf6caf0fedc0d6b80eee268f437f58a"><div class="ttname"><a href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#a5cf6caf0fedc0d6b80eee268f437f58a">alib::g3::LogFactoryConfig::level_should_keep</a></div><div class="ttdeci">LevelKeepFn level_should_keep</div><div class="ttdoc">用来提前剪枝的函数，默认为空</div><div class="ttdef"><b>Definition</b> base_config.h:62</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactoryConfig_html_a67d229b7b23167e5a4ea8238e248c094"><div class="ttname"><a href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#a67d229b7b23167e5a4ea8238e248c094">alib::g3::LogFactoryConfig::msg</a></div><div class="ttdeci">LogMsgConfig msg</div><div class="ttdoc">默认的消息配置信息</div><div class="ttdef"><b>Definition</b> base_config.h:66</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactoryConfig_html_a865383b902f39d57fbf0e815fb87886a"><div class="ttname"><a href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#a865383b902f39d57fbf0e815fb87886a">alib::g3::LogFactoryConfig::def_level</a></div><div class="ttdeci">int def_level</div><div class="ttdoc">默认选择的level数值</div><div class="ttdef"><b>Definition</b> base_config.h:60</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactoryConfig_html_ac277a2e7cdf8046565911987259022f8"><div class="ttname"><a href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#ac277a2e7cdf8046565911987259022f8">alib::g3::LogFactoryConfig::header</a></div><div class="ttdeci">std::string_view header</div><div class="ttdoc">缓存的header，LogFactory回对这个再处理，使用Logger::register_header来防止悬垂</div><div class="ttdef"><b>Definition</b> base_config.h:64</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactoryConfig_html_adfd3979df6071ab0f89ccec3d5e1a9a7"><div class="ttname"><a href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#adfd3979df6071ab0f89ccec3d5e1a9a7">alib::g3::LogFactoryConfig::LevelKeepFn</a></div><div class="ttdeci">bool(*)(int) LevelKeepFn</div><div class="ttdoc">这个用于在LogFactory阶段就直接pass掉调用，从而进一步剪枝叶</div><div class="ttdef"><b>Definition</b> base_config.h:57</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactoryConfig_html_af2b70badcf9f086ae9bf556b24577451"><div class="ttname"><a href="../../d2/d63/structalib_1_1g3_1_1LogFactoryConfig.html#af2b70badcf9f086ae9bf556b24577451">alib::g3::LogFactoryConfig::LogFactoryConfig</a></div><div class="ttdeci">LogFactoryConfig(std::string_view iheader=&quot;&quot;, int idef_level=0, LevelKeepFn ilevel_should_keep=nullptr, const LogMsgConfig &amp;msg_cfg=LogMsgConfig())</div><div class="ttdoc">构造默认数值</div><div class="ttdef"><b>Definition</b> kernel.h:558</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html">alib::g3::LogFactory</a></div><div class="ttdoc">提供对日志的快捷输出</div><div class="ttdef"><b>Definition</b> kernel.h:233</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_a2f16c76dce9863bbabbe98d44cb21f69"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a2f16c76dce9863bbabbe98d44cb21f69">alib::g3::LogFactory::LogFactory</a></div><div class="ttdeci">LogFactory(Logger &amp;binded, std::string_view header=&quot;&quot;, int def_level=0, LogFactoryConfig::LevelKeepFn level_should_keep=nullptr, const LogMsgConfig &amp;msg=LogMsgConfig())</div><div class="ttdoc">初始化logger，简单版本</div><div class="ttdef"><b>Definition</b> kernel.h:254</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_a4b6ef169d534ee2481cfe39ecc987277"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a4b6ef169d534ee2481cfe39ecc987277">alib::g3::LogFactory::log</a></div><div class="ttdeci">bool log(int level, std::string_view fmt, Args &amp;&amp;... args)</div><div class="ttdoc">支持多参数的转发</div><div class="ttdef"><b>Definition</b> kernel.h:275</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_a4fe23f99da488626ee830547c6b00c22"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a4fe23f99da488626ee830547c6b00c22">alib::g3::LogFactory::log</a></div><div class="ttdeci">bool log(int level, std::string_view message)</div><div class="ttdoc">信息转发到Logger</div><div class="ttdef"><b>Definition</b> kernel.h:266</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_a857146b1c29ca47b4c91b6f34929798a"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a857146b1c29ca47b4c91b6f34929798a">alib::g3::LogFactory::logger</a></div><div class="ttdeci">Logger &amp; logger</div><div class="ttdoc">绑定的Logger对象</div><div class="ttdef"><b>Definition</b> kernel.h:235</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_a8e626bb498e40ab927c3112322d97eec"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a8e626bb498e40ab927c3112322d97eec">alib::g3::LogFactory::operator()</a></div><div class="ttdeci">StreamedContext&lt; LogFactory &gt; operator()(LogLevel spec_level)</div><div class="ttdoc">提供流式输出，适配LogLevel</div><div class="ttdef"><b>Definition</b> kernel.h:317</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_a96a0a1145b01ed7e039d9f7f3a772847"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a96a0a1145b01ed7e039d9f7f3a772847">alib::g3::LogFactory::log</a></div><div class="ttdeci">bool log(LogLevel level, std::string_view message)</div><div class="ttdoc">信息转发到Logger，适配LogLevel</div><div class="ttdef"><b>Definition</b> kernel.h:271</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_a984ab8afda501dd68f801c207e03124d"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a984ab8afda501dd68f801c207e03124d">alib::g3::LogFactory::log_pmr</a></div><div class="ttdeci">bool log_pmr(int level, std::pmr::string &amp;pmr_data, const LogMsgConfig &amp;mcfg)</div><div class="ttdoc">提供已经装载到对应内存的数据，这个时候直接move就行</div><div class="ttdef"><b>Definition</b> kernel.h:300</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_a9e4843af9dfa0b115c98aff0ddeaefd1"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#a9e4843af9dfa0b115c98aff0ddeaefd1">alib::g3::LogFactory::log</a></div><div class="ttdeci">bool log(LogLevel level, std::string_view fmt, Args &amp;&amp;... args)</div><div class="ttdoc">支持多参数的转发，适配LogLevel</div><div class="ttdef"><b>Definition</b> kernel.h:291</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_aac0f7b72d6ca9604c25d3b3612c18beb"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#aac0f7b72d6ca9604c25d3b3612c18beb">alib::g3::LogFactory::LogFactory</a></div><div class="ttdeci">LogFactory(Logger &amp;binded, const LogFactoryConfig &amp;=LogFactoryConfig())</div><div class="ttdoc">初始化logger</div><div class="ttdef"><b>Definition</b> kernel.h:548</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_ac6e890ccb245bb623f6c69622a2d9f40"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#ac6e890ccb245bb623f6c69622a2d9f40">alib::g3::LogFactory::operator()</a></div><div class="ttdeci">StreamedContext&lt; LogFactory &gt; operator()()</div><div class="ttdoc">提供流式输出，这里采用默认的level</div><div class="ttdef"><b>Definition</b> kernel.h:307</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_ac94a2eec1ef052dc81773f4cec85f961"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#ac94a2eec1ef052dc81773f4cec85f961">alib::g3::LogFactory::log</a></div><div class="ttdeci">bool log(LogLevel level, const std::format_string&lt; Args... &gt; &amp;fmt, Args &amp;&amp;... args)</div><div class="ttdoc">支持多参数的转发，静态版本，适配LogLevel</div><div class="ttdef"><b>Definition</b> kernel.h:295</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_ae408732d5cd37659f87f99c8610dfd81"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#ae408732d5cd37659f87f99c8610dfd81">alib::g3::LogFactory::operator()</a></div><div class="ttdeci">StreamedContext&lt; LogFactory &gt; operator()(int spec_level)</div><div class="ttdoc">提供流式输出</div><div class="ttdef"><b>Definition</b> kernel.h:312</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_aede09f539eef7646d7f688b976e13356"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#aede09f539eef7646d7f688b976e13356">alib::g3::LogFactory::log_fast</a></div><div class="ttdeci">bool log_fast(int level, const std::format_string&lt; Args... &gt; &amp;fmt, Args &amp;&amp;... args)</div><div class="ttdoc">支持多参数的转发，静态版本</div><div class="ttdef"><b>Definition</b> kernel.h:283</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogFactory_html_af9e01c47333727491fc1805d2ed0b358"><div class="ttname"><a href="../../d2/d69/structalib_1_1g3_1_1LogFactory.html#af9e01c47333727491fc1805d2ed0b358">alib::g3::LogFactory::cfg</a></div><div class="ttdeci">LogFactoryConfig cfg</div><div class="ttdoc">LogFactory配置</div><div class="ttdef"><b>Definition</b> kernel.h:237</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html">alib::g3::LogMsgConfig</a></div><div class="ttdoc">日志消息细节控制，用在LogFactory中，控制额外信息的输出</div><div class="ttdef"><b>Definition</b> base_config.h:7</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html_a27f972d9fab774c494a2ff199c44e8ef"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a27f972d9fab774c494a2ff199c44e8ef">alib::g3::LogMsgConfig::level_cast</a></div><div class="ttdeci">LevelCastFn level_cast</div><div class="ttdoc">用来转换level的函数，默认为 default_level_cast</div><div class="ttdef"><b>Definition</b> base_config.h:26</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html_a34b0feee729dbe98466f6e2acd0c010a"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a34b0feee729dbe98466f6e2acd0c010a">alib::g3::LogMsgConfig::out_level</a></div><div class="ttdeci">bool out_level</div><div class="ttdoc">是否输出当前日志级别，默认为 true</div><div class="ttdef"><b>Definition</b> base_config.h:24</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html_a4fc4e8047952f50149850313648e3261"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a4fc4e8047952f50149850313648e3261">alib::g3::LogMsgConfig::gen_date</a></div><div class="ttdeci">bool gen_date</div><div class="ttdoc">是否生成当前日期,eg [25-10-1 09:02:02]，默认为true</div><div class="ttdef"><b>Definition</b> base_config.h:19</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html_a53569bb4390d73b2cd6505eb0f08b7a3"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a53569bb4390d73b2cd6505eb0f08b7a3">alib::g3::LogMsgConfig::gen_time</a></div><div class="ttdeci">bool gen_time</div><div class="ttdoc">是否生成运行时间,eg [999.12ms]，默认为true</div><div class="ttdef"><b>Definition</b> base_config.h:17</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html_a67ae3427a677b8c8f6ad933c8121f037"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a67ae3427a677b8c8f6ad933c8121f037">alib::g3::LogMsgConfig::gen_thread_id</a></div><div class="ttdeci">bool gen_thread_id</div><div class="ttdoc">是否生成线程id,eg [TID424325]，默认为false</div><div class="ttdef"><b>Definition</b> base_config.h:15</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html_a90533893f517d9c295327d26f9d92bcc"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a90533893f517d9c295327d26f9d92bcc">alib::g3::LogMsgConfig::disable_extra_information</a></div><div class="ttdeci">bool disable_extra_information</div><div class="ttdoc">是否禁用额外信息生成，一旦为true，下面的额外信息也都没有意义了，默认为false</div><div class="ttdef"><b>Definition</b> base_config.h:12</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html_a979322c23638b46dfc917309387c3d12"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#a979322c23638b46dfc917309387c3d12">alib::g3::LogMsgConfig::default_level_cast</a></div><div class="ttdeci">static std::string_view default_level_cast(int level_in)</div><div class="ttdoc">默认的level cast,适配LogLevel这个enum</div><div class="ttdef"><b>Definition</b> kernel.h:341</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html_aa6e66b3df14ac3dd23985e24f0bc1bfc"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#aa6e66b3df14ac3dd23985e24f0bc1bfc">alib::g3::LogMsgConfig::out_header</a></div><div class="ttdeci">bool out_header</div><div class="ttdoc">是否输出LogFactory的&quot;head&quot;,eg &quot;Test&quot;，默认为 true</div><div class="ttdef"><b>Definition</b> base_config.h:22</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsgConfig_html_ad7c570f5c760e61aa98a252e6befac29"><div class="ttname"><a href="../../d8/d46/structalib_1_1g3_1_1LogMsgConfig.html#ad7c570f5c760e61aa98a252e6befac29">alib::g3::LogMsgConfig::LogMsgConfig</a></div><div class="ttdeci">LogMsgConfig()</div><div class="ttdoc">这个初始化了默认值</div><div class="ttdef"><b>Definition</b> kernel.h:331</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html">alib::g3::LogMsg</a></div><div class="ttdoc">日志的每一条消息</div><div class="ttdef"><b>Definition</b> base_msg.h:7</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_a316ec428427bf6fbec46f2f44c488a01"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a316ec428427bf6fbec46f2f44c488a01">alib::g3::LogMsg::gen_composed</a></div><div class="ttdeci">std::string_view gen_composed()</div><div class="ttdoc">生成组合数据，懒加载，在无其他日志插入的context中，第一次调用会构造，之后之前返回构造了的。注意，最后面有一个换行符，不想要可以截取</div><div class="ttdef"><b>Definition</b> kernel.h:409</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_a35e2b73731c6ed4664c7fbf3787b687d"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a35e2b73731c6ed4664c7fbf3787b687d">alib::g3::LogMsg::body</a></div><div class="ttdeci">std::pmr::string body</div><div class="ttdoc">最终合成的日志主要部分</div><div class="ttdef"><b>Definition</b> base_msg.h:18</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_a462d4e038715dab4e82df596f590ee60"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a462d4e038715dab4e82df596f590ee60">alib::g3::LogMsg::timestamp</a></div><div class="ttdeci">double timestamp</div><div class="ttdoc">producer生成的时间戳</div><div class="ttdef"><b>Definition</b> base_msg.h:28</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_a7e5a60394226e24f77be85e2479f27f0"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7e5a60394226e24f77be85e2479f27f0">alib::g3::LogMsg::build_on_producer</a></div><div class="ttdeci">void build_on_producer(const timespec &amp;start)</div><div class="ttdoc">Producer构造基础信息，如timestamp和tid</div><div class="ttdef"><b>Definition</b> kernel.h:367</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_a7f1bdbfa23a1aba75f597df2f39a606a"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a7f1bdbfa23a1aba75f597df2f39a606a">alib::g3::LogMsg::sdate</a></div><div class="ttdeci">static thread_local std::string sdate</div><div class="ttdoc">用于缓冲日期数据</div><div class="ttdef"><b>Definition</b> base_msg.h:32</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_a8ffc7f4dcbaab62bbdef18d3c4aafaec"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a8ffc7f4dcbaab62bbdef18d3c4aafaec">alib::g3::LogMsg::build_on_consumer</a></div><div class="ttdeci">void build_on_consumer()</div><div class="ttdoc">Consumer合成字符串存储到当前结构</div><div class="ttdef"><b>Definition</b> kernel.h:382</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_a98ec3bac0a0e93ff2fa51a24e59a1830"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#a98ec3bac0a0e93ff2fa51a24e59a1830">alib::g3::LogMsg::header</a></div><div class="ttdeci">std::string_view header</div><div class="ttdoc">指向Logger中的header pool,保证不悬垂</div><div class="ttdef"><b>Definition</b> base_msg.h:16</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_aa6bdf4277f9fc5f40efaad28c541be64"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#aa6bdf4277f9fc5f40efaad28c541be64">alib::g3::LogMsg::level</a></div><div class="ttdeci">int level</div><div class="ttdoc">这条日志的级别</div><div class="ttdef"><b>Definition</b> base_msg.h:22</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_aae7b9594193672746aa855b3504d8fc4"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#aae7b9594193672746aa855b3504d8fc4">alib::g3::LogMsg::move_msg</a></div><div class="ttdeci">void move_msg(LogMsg &amp;&amp;msg)</div><div class="ttdoc">移动构造日志，主要处理为移动构造pmr对象，pmr对象最好保持allocator一致</div><div class="ttdef"><b>Definition</b> kernel.h:442</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_ac715a8550515e26efc5fef8939c1fad8"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ac715a8550515e26efc5fef8939c1fad8">alib::g3::LogMsg::cfg</a></div><div class="ttdeci">LogMsgConfig cfg</div><div class="ttdoc">日志指向的配置，目前觉得使用指针会带来安全风险，因此尝试一下const结构体</div><div class="ttdef"><b>Definition</b> base_msg.h:20</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_ae3343d9c1f5c24ceb2a45f9f2371724b"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae3343d9c1f5c24ceb2a45f9f2371724b">alib::g3::LogMsg::scomposed</a></div><div class="ttdeci">static thread_local std::string scomposed</div><div class="ttdoc">用户缓冲最终生成的数据</div><div class="ttdef"><b>Definition</b> base_msg.h:34</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_ae45724f1796842e5265e606136312fe2"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#ae45724f1796842e5265e606136312fe2">alib::g3::LogMsg::LogMsg</a></div><div class="ttdeci">LogMsg()</div><div class="ttdoc">构造空的数据，用于占位</div><div class="ttdef"><b>Definition</b> base_msg.h:39</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LogMsg_html_af9f4415a9a7b4775b29eb5a4a6979550"><div class="ttname"><a href="../../d2/d81/structalib_1_1g3_1_1LogMsg.html#af9f4415a9a7b4775b29eb5a4a6979550">alib::g3::LogMsg::thread_id</a></div><div class="ttdeci">uint64_t thread_id</div><div class="ttdoc">线程id</div><div class="ttdef"><b>Definition</b> base_msg.h:26</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LoggerConfig_html"><div class="ttname"><a href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html">alib::g3::LoggerConfig</a></div><div class="ttdoc">Logger的配置文件</div><div class="ttdef"><b>Definition</b> base_config.h:36</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LoggerConfig_html_a0b489b0b77978a7cad7afb5e3cd4c814"><div class="ttname"><a href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a0b489b0b77978a7cad7afb5e3cd4c814">alib::g3::LoggerConfig::LoggerConfig</a></div><div class="ttdeci">LoggerConfig()</div><div class="ttdoc">构造默认配置</div><div class="ttdef"><b>Definition</b> kernel.h:453</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LoggerConfig_html_a20507fcdf4b780991d549d60f442bb9e"><div class="ttname"><a href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a20507fcdf4b780991d549d60f442bb9e">alib::g3::LoggerConfig::back_pressure_multiply</a></div><div class="ttdeci">unsigned int back_pressure_multiply</div><div class="ttdoc">背压模式的阈值，阈值 = 下面的倍率 * 一次性能取出最大值 * 消费者数量，默认为 4</div><div class="ttdef"><b>Definition</b> base_config.h:46</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LoggerConfig_html_a52020a69b094a5f306cd94ca41d13563"><div class="ttname"><a href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a52020a69b094a5f306cd94ca41d13563">alib::g3::LoggerConfig::fetch_message_count_max</a></div><div class="ttdeci">unsigned int fetch_message_count_max</div><div class="ttdoc">fetch_message一次性能取出信息的最大值，默认为 consumer_message_default_count</div><div class="ttdef"><b>Definition</b> base_config.h:41</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LoggerConfig_html_a58958133c7a4052b73218d198ec5c51c"><div class="ttname"><a href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a58958133c7a4052b73218d198ec5c51c">alib::g3::LoggerConfig::enable_back_pressure</a></div><div class="ttdeci">bool enable_back_pressure</div><div class="ttdoc">是否开启背压模式，默认为false（背压会出现消息不同步），如果为false，下面的内容失效</div><div class="ttdef"><b>Definition</b> base_config.h:43</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1LoggerConfig_html_a95c27af44013e2cf4d2e2d9fa42681b4"><div class="ttname"><a href="../../d0/d74/structalib_1_1g3_1_1LoggerConfig.html#a95c27af44013e2cf4d2e2d9fa42681b4">alib::g3::LoggerConfig::consumer_count</a></div><div class="ttdeci">unsigned int consumer_count</div><div class="ttdoc">Consumer线程数量，0表示启动sync模式，否则为async，默认为1</div><div class="ttdef"><b>Definition</b> base_config.h:39</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html">alib::g3::Logger</a></div><div class="ttdoc">日志核心，负责日志队列维护、转发</div><div class="ttdef"><b>Definition</b> kernel.h:88</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a118c9a9b65482b20a00b7b047e7d965f"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a118c9a9b65482b20a00b7b047e7d965f">alib::g3::Logger::msg_str_buf</a></div><div class="ttdeci">std::pmr::synchronized_pool_resource msg_str_buf</div><div class="ttdoc">可能涉及多线程同时操作&amp;分配，因此需要sync，无奈之举</div><div class="ttdef"><b>Definition</b> kernel.h:165</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a2de22ddaba55c612c453602e3180f10b"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2de22ddaba55c612c453602e3180f10b">alib::g3::Logger::filters</a></div><div class="ttdeci">filters_t filters</div><div class="ttdoc">过滤器缓存</div><div class="ttdef"><b>Definition</b> kernel.h:102</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a2f25b1e0a200c78e2dc9593b8ad54331"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a2f25b1e0a200c78e2dc9593b8ad54331">alib::g3::Logger::msg_str_alloc</a></div><div class="ttdeci">std::pmr::polymorphic_allocator&lt; char &gt; msg_str_alloc</div><div class="ttdoc">字符串数据池</div><div class="ttdef"><b>Definition</b> kernel.h:163</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a31093d805eb89b742b27938c12671843"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a31093d805eb89b742b27938c12671843">alib::g3::Logger::back_pressure_threshold</a></div><div class="ttdeci">uint64_t back_pressure_threshold</div><div class="ttdoc">背压阈值</div><div class="ttdef"><b>Definition</b> kernel.h:128</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a3bad9a4bdcef5f02ae416e20ffc1a9c5"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3bad9a4bdcef5f02ae416e20ffc1a9c5">alib::g3::Logger::targets</a></div><div class="ttdeci">targets_t targets</div><div class="ttdoc">输出对象缓存</div><div class="ttdef"><b>Definition</b> kernel.h:98</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a3eb1b3baeeb639994478226c11dd9cda"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a3eb1b3baeeb639994478226c11dd9cda">alib::g3::Logger::register_header</a></div><div class="ttdeci">std::string_view register_header(std::string_view val)</div><div class="ttdoc">LogFactory通过这个注册一个header，其自身不持有防止悬垂</div><div class="ttdef"><b>Definition</b> alogger.cpp:163</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a4616857e40ee79b5ded0efddfed76911"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a4616857e40ee79b5ded0efddfed76911">alib::g3::Logger::msg_alloc</a></div><div class="ttdeci">std::pmr::polymorphic_allocator&lt; LogMsg &gt; msg_alloc</div><div class="ttdoc">专门给消息池的内存池</div><div class="ttdef"><b>Definition</b> kernel.h:111</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a4e165385dd472d18dbe525e89bb83d39"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a4e165385dd472d18dbe525e89bb83d39">alib::g3::Logger::logger_not_on_destroying</a></div><div class="ttdeci">bool logger_not_on_destroying</div><div class="ttdoc">线程能继续运行的flag</div><div class="ttdef"><b>Definition</b> kernel.h:130</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a5492c60da2f1b2b82c0cbb60ba241b4a"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a5492c60da2f1b2b82c0cbb60ba241b4a">alib::g3::Logger::push_message</a></div><div class="ttdeci">bool push_message(int level, std::string_view header, std::string_view body, LogMsgConfig &amp;cfg)</div><div class="ttdoc">加入一条消息，必须必须保证header不悬垂！！！</div><div class="ttdef"><b>Definition</b> kernel.h:490</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a569081966f3c0719f70f930d4148baa3"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a569081966f3c0719f70f930d4148baa3">alib::g3::Logger::safe_remove_mod</a></div><div class="ttdeci">bool safe_remove_mod(std::string_view key, std::unordered_map&lt; std::string, RefWrapper&lt; T &gt; &gt; &amp;st, T &amp;container)</div><div class="ttdoc">安全地移除一个module</div><div class="ttdef"><b>Definition</b> kernel.h:461</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a5986d2190342f2ad677e1d59cf804fe9"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a5986d2190342f2ad677e1d59cf804fe9">alib::g3::Logger::push_message_pmr</a></div><div class="ttdeci">bool push_message_pmr(int level, std::string_view head, std::pmr::string &amp;body, const LogMsgConfig &amp;cfg)</div><div class="ttdoc">内部处理，会直接调用std::move高效交换数据</div><div class="ttdef"><b>Definition</b> alogger.cpp:123</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a662778efdd67c58761ab2d6023049dbb"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a662778efdd67c58761ab2d6023049dbb">alib::g3::Logger::config</a></div><div class="ttdeci">LoggerConfig config</div><div class="ttdoc">L</div><div class="ttdef"><b>Definition</b> kernel.h:95</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a797d4430a202990c6edf0030eb5b0c4e"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a797d4430a202990c6edf0030eb5b0c4e">alib::g3::Logger::header_pool</a></div><div class="ttdeci">std::vector&lt; std::string &gt; header_pool</div><div class="ttdoc">Header常量池，只增不减，鉴于LogFactory数目很少</div><div class="ttdef"><b>Definition</b> kernel.h:109</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a84ed69fc840476ecb0941da724081204"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a84ed69fc840476ecb0941da724081204">alib::g3::Logger::messages</a></div><div class="ttdeci">std::pmr::deque&lt; LogMsg &gt; messages</div><div class="ttdoc">消息池</div><div class="ttdef"><b>Definition</b> kernel.h:116</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a85f8d6af987f55d9272e4b191990d8e0"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a85f8d6af987f55d9272e4b191990d8e0">alib::g3::Logger::monotic_pool_lock</a></div><div class="ttdeci">std::mutex monotic_pool_lock</div><div class="ttdoc">普通资源池锁，由于处于配置阶段就不这个讲究细分了</div><div class="ttdef"><b>Definition</b> kernel.h:107</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a868a3b173dc32126bd8abc5d1ff0e948"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a868a3b173dc32126bd8abc5d1ff0e948">alib::g3::Logger::clear_filter</a></div><div class="ttdeci">void clear_filter()</div><div class="ttdoc">清除所有过滤器</div><div class="ttdef"><b>Definition</b> kernel.h:496</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a8ecf4014046374d52aaca567ed39e6ab"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a8ecf4014046374d52aaca567ed39e6ab">alib::g3::Logger::consumers</a></div><div class="ttdeci">std::vector&lt; std::thread &gt; consumers</div><div class="ttdoc">线程池，用来管理consumer</div><div class="ttdef"><b>Definition</b> kernel.h:125</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a8f2548eb1f993ea381598e9e7df75b64"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a8f2548eb1f993ea381598e9e7df75b64">alib::g3::Logger::get_mod_handle</a></div><div class="ttdeci">auto get_mod_handle(std::string_view name)</div><div class="ttdoc">安全获取内容，但是使用比较繁琐，需要先使用has_data确认，然后ret.get()-&gt;XX使用</div><div class="ttdef"><b>Definition</b> kernel.h:215</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a919a4b64f79593de8452fa4f48e71363"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a919a4b64f79593de8452fa4f48e71363">alib::g3::Logger::clear_target</a></div><div class="ttdeci">void clear_target()</div><div class="ttdoc">清除所有输出对象</div><div class="ttdef"><b>Definition</b> kernel.h:501</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a9257b3cd4a84642ece4bdb542f2cfc52"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a9257b3cd4a84642ece4bdb542f2cfc52">alib::g3::Logger::clear_mod</a></div><div class="ttdeci">void clear_mod()</div><div class="ttdoc">清空所有module，包含targets和filter</div><div class="ttdef"><b>Definition</b> kernel.h:507</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_a93419addd82cd897ef8b85e1732ff952"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#a93419addd82cd897ef8b85e1732ff952">alib::g3::Logger::get_mod_raw</a></div><div class="ttdeci">T * get_mod_raw(std::string_view name)</div><div class="ttdoc">获取模块，请不要缓存内容！</div><div class="ttdef"><b>Definition</b> kernel.h:203</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_aa3a622312fdfa2c2c2b84282fedd3770"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#aa3a622312fdfa2c2c2b84282fedd3770">alib::g3::Logger::append_mod</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; append_mod(std::string_view name, Args &amp;&amp;... args)</div><div class="ttdoc">添加一个新的mod</div><div class="ttdef"><b>Definition</b> kernel.h:512</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_aa46b9bed346c63cea196875d17bee5ff"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#aa46b9bed346c63cea196875d17bee5ff">alib::g3::Logger::message_size</a></div><div class="ttdeci">std::atomic&lt; int &gt; message_size</div><div class="ttdoc">消息池大小，减小size()调用啥的</div><div class="ttdef"><b>Definition</b> kernel.h:118</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_ab3289fb4dd745aae462f42ff29c107a1"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ab3289fb4dd745aae462f42ff29c107a1">alib::g3::Logger::start_time</a></div><div class="ttdeci">timespec start_time</div><div class="ttdoc">缓存的开始时间</div><div class="ttdef"><b>Definition</b> kernel.h:132</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_ac2bde7e69231f5699140a3b36c64aa5a"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac2bde7e69231f5699140a3b36c64aa5a">alib::g3::Logger::search_targets</a></div><div class="ttdeci">std::unordered_map&lt; std::string, RefWrapper&lt; targets_t &gt; &gt; search_targets</div><div class="ttdoc">输出对象查找池</div><div class="ttdef"><b>Definition</b> kernel.h:100</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_ac4de271bb7dcb3a1820e85c25ce91d1d"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ac4de271bb7dcb3a1820e85c25ce91d1d">alib::g3::Logger::search_filters</a></div><div class="ttdeci">std::unordered_map&lt; std::string, RefWrapper&lt; filters_t &gt; &gt; search_filters</div><div class="ttdoc">过滤对象查找池</div><div class="ttdef"><b>Definition</b> kernel.h:104</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_acdc0b471c22ae9a4260b4e0eac0db40b"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#acdc0b471c22ae9a4260b4e0eac0db40b">alib::g3::Logger::flush_targets</a></div><div class="ttdeci">void flush_targets()</div><div class="ttdoc">刷新所有target</div><div class="ttdef"><b>Definition</b> kernel.h:482</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_ad58fd8112c064466c9b28e581fb067d1"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ad58fd8112c064466c9b28e581fb067d1">alib::g3::Logger::remove_mod</a></div><div class="ttdeci">bool remove_mod(std::string_view name)</div><div class="ttdoc">移除对应的module</div><div class="ttdef"><b>Definition</b> kernel.h:538</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_ad5dcfdf581ef0d3b7645237cf5ffc37c"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ad5dcfdf581ef0d3b7645237cf5ffc37c">alib::g3::Logger::msg_semaphore</a></div><div class="ttdeci">std::counting_semaphore&lt; semaphore_max_val &gt; msg_semaphore</div><div class="ttdoc">信号量，用来实现异步休眠</div><div class="ttdef"><b>Definition</b> kernel.h:123</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_ae153abe31f561df40bea1d86b3d691d5"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ae153abe31f561df40bea1d86b3d691d5">alib::g3::Logger::msg_lock</a></div><div class="ttdeci">std::mutex msg_lock</div><div class="ttdoc">锁，目前还是相信std::mutex的力量</div><div class="ttdef"><b>Definition</b> kernel.h:121</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1Logger_html_ae564073cf670d3cbb7c824d772c45cb8"><div class="ttname"><a href="../../d4/d98/structalib_1_1g3_1_1Logger.html#ae564073cf670d3cbb7c824d772c45cb8">alib::g3::Logger::msg_buf</a></div><div class="ttdeci">std::pmr::unsynchronized_pool_resource msg_buf</div><div class="ttdoc">消息池的resource</div><div class="ttdef"><b>Definition</b> kernel.h:113</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1RefWrapper_html"><div class="ttname"><a href="../../d7/d20/structalib_1_1g3_1_1RefWrapper.html">alib::g3::RefWrapper</a></div><div class="ttdoc">通过持有index从而保证一定的安全性，Release优化后仅仅多出0.3ns(5.7Ghz电脑)的解引用时长</div><div class="ttdef"><b>Definition</b> aref.h:92</div></div>
<div class="ttc" id="astructalib_1_1g3_1_1StreamedContext_html"><div class="ttname"><a href="../../d5/d56/structalib_1_1g3_1_1StreamedContext.html">alib::g3::StreamedContext</a></div><div class="ttdoc">流式输出核心</div><div class="ttdef"><b>Definition</b> streamed_context.h:29</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_414fd41e5c5d231839fa5fbb45c54f18.html">CDep</a></li><li class="navelem"><a class="el" href="../../dir_7af9b032d80012b0228e7b144fdb5b33.html">headers</a></li><li class="navelem"><a class="el" href="../../dir_d2d8d6f82172cceeb2fc41d9f2a4d21e.html">alib-g3</a></li><li class="navelem"><a class="el" href="../../dir_be216c816632aa4955947bd3cb1065c9.html">log</a></li><li class="navelem"><a class="el" href="../../d0/daa/kernel_8h.html">kernel.h</a></li>
    <li class="footer">制作者 <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
