#!/bin/bash

mkdir -p dep

# Install build dependencies
sudo apt-get update
sudo apt-get install -y build-essential cmake
sudo apt-get install -y rapidjson-dev
# Clone the toml++ repository and copy the toml++.hpp file
git clone https://github.com/marzer/tomlplusplus.git
cp tomlplusplus/toml++/toml++.hpp dep/toml++.hpp

# Create a build directory if it doesn't exist
mkdir -p build

# Run CMake to configure the project
cmake -S . -B build -Dcustom_include_dir=dep -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_C_COMPILER=clang

# Generate Makefiles using CMake
cmake --build build
