#!/bin/bash

# Install build dependencies
sudo apt-get install -y build-essential cmake
sudo apt-get install -y rapidjson-dev

# Create a build directory if it doesn't exist
mkdir -p CBuild
cd CBuild

# Clone the toml++ repository and copy the toml++.hpp file
git clone https://github.com/marzer/tomlplusplus.git
cp tomlplusplus/toml.hpp dep/toml.hpp

mkdir -p dep

# Run CMake to configure the project
cmake .. -Dcustom_include_dir=$(pwd)/dep -DCMAKE_BUILD_TYPE=Release -G "Unix Makefiles"

make
make check
make distcheck